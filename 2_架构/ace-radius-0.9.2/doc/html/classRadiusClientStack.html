<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ace-radius: RadiusClientStack Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.7-20040704 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>RadiusClientStack Class Reference</h1>Simple RADIUS client stack implementation.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="RadiusClientStack_8h-source.html">RadiusClientStack.h</a>&gt;</code>
<p>
<a href="classRadiusClientStack-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#a0">RadiusClientStack</a> (uint16_t p_port=0, const char *p_hostname=NULL)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a1" doxytag="RadiusClientStack::~RadiusClientStack" ></a>
&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#a1">~RadiusClientStack</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destructor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="a2" doxytag="RadiusClientStack::isValid" ></a>
bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#a2">isValid</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Client stack was properly created? <br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#a3">addServer</a> (const char *p_hostname, uint16_t p_port, <a class="el" href="classRadiusSecret.html">RadiusSecret</a> p_secret, int p_responseTimeout=5, int p_retransmitCount=2)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add RADIUS server to work with.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="classRadiusPacket.html">RadiusPacket</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#a4">sendPacket</a> (<a class="el" href="classRadiusPacket.html">RadiusPacket</a> &amp;p_packet)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send packet to the network.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#a5">getNextPacketID</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get next ID for RADIUS packet.  <a href="#a5"></a><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r0" doxytag="RadiusClientStack::m_connections" ></a>
<a class="el" href="classRadiusClientConnection.html">RadiusClientConnection</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#r0">m_connections</a> [D_MAX_RADIUS_CLIENT_CONNECTIONS]</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Client connections. <br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r1" doxytag="RadiusClientStack::m_connectionsNum" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#r1">m_connectionsNum</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Number of client connections. <br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r2" doxytag="RadiusClientStack::m_lastConnection" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#r2">m_lastConnection</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Last used client connection. <br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r3" doxytag="RadiusClientStack::m_nextPacketID" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#r3">m_nextPacketID</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Next packet ID. <br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r4" doxytag="RadiusClientStack::m_clientAddress" ></a>
<a class="el" href="classRadiusAddress.html">RadiusAddress</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#r4">m_clientAddress</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Client address. <br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r5" doxytag="RadiusClientStack::m_socket" ></a>
int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#r5">m_socket</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">UDP socket. <br></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="anchor" name="r6" doxytag="RadiusClientStack::m_isValid" ></a>
bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="classRadiusClientStack.html#r6">m_isValid</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Socket was properly created? <br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Simple RADIUS client stack implementation. 
<p>
A relatively simple fully-synchronic RADIUS client stack implementation. Packet transmission is performed on the context of the calling application thread and blocks until the response is received or (re)transmission times out.<p>
Multiple RADIUS server connections (with per-connection secret keys and retransmission settings) are supported. Note, however, that these multiple connections are used for high-availability and not for load-balancing.<p>
Packets are initially sent via the first connection. If corresponding RADIUS server doesn't respond, client stack switches to the next available connection. "Last known good" connection is used for transmission of consequent packets. Packet transmission is considered "failed" when all available connections fail to transmit it.<p>
See test/client.cpp for a sample RADIUS client application. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="RadiusClientStack::RadiusClientStack" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> RadiusClientStack::RadiusClientStack           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">uint16_t&nbsp;</td>
          <td class="mdname" nowrap> <em>p_port</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p_hostname</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor. 
<p>
Both p_port and p_hostname parameters are optional and normally are not used.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td><tt>[in]</tt>&nbsp;</td><td valign=top><em>p_port</em>&nbsp;</td><td>- local port of RADIUS client </td></tr>
    <tr><td><tt>[in]</tt>&nbsp;</td><td valign=top><em>p_hostname</em>&nbsp;</td><td>- local hostname of RADIUS client </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a3" doxytag="RadiusClientStack::addServer" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int RadiusClientStack::addServer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>p_hostname</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>uint16_t&nbsp;</td>
          <td class="mdname" nowrap> <em>p_port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classRadiusSecret.html">RadiusSecret</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>p_secret</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>p_responseTimeout</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>p_retransmitCount</em> = <code>2</code></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add RADIUS server to work with. 
<p>
At least one RADIUS server should be added to the RadiusClientStack before transmitting any packet.<p>
Multiple RADIUS servers (with per-server retransmission settings) may be specified for high-availability (but not for load-balancing).<p>
<dl compact><dt><b>Returns:</b></dt><dd>RC_SUCCESS if server was successfully added; RC_FAIL otherwise </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="RadiusClientStack::sendPacket" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classRadiusPacket.html">RadiusPacket</a> * RadiusClientStack::sendPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classRadiusPacket.html">RadiusPacket</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p_packet</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send packet to the network. 
<p>
Send packet to the RADIUS server and wait for response. If response is received - it's returned; otherwise NULL is returned.<p>
If more than one connection exists, packet will first be transmitted via the "last known good" connection. If the transmission fails, next connection will be tried. And so on and so forth.<p>
Only when all connections fail to transmit the packet, we give up and return NULL.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td><tt>[in]</tt>&nbsp;</td><td valign=top><em>p_packet</em>&nbsp;</td><td>- request packet to be sent </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>response packet received or NULL </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="RadiusClientStack::getNextPacketID" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int RadiusClientStack::getNextPacketID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get next ID for RADIUS packet. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>next packet ID </dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li>ace-radius/<a class="el" href="RadiusClientStack_8h-source.html">RadiusClientStack.h</a><li>ace-radius/RadiusClientStack.cpp</ul>
<hr size="1"><address style="align: right;"><small>Generated on Tue Aug 11 18:35:07 2009 for ace-radius by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.7-20040704 </small></address>
</body>
</html>
